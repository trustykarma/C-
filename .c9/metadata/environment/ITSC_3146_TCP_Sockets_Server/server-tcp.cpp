{"filter":false,"title":"server-tcp.cpp","tooltip":"/ITSC_3146_TCP_Sockets_Server/server-tcp.cpp","undoManager":{"mark":15,"position":15,"stack":[[{"start":{"row":1,"column":0},"end":{"row":5,"column":22},"action":"insert","lines":["#include <unistd.h>","#include <sys/socket.h>","#include <arpa/inet.h>","#include <netdb.h>","#include <sys/types.h>"],"id":2}],[{"start":{"row":1,"column":0},"end":{"row":5,"column":22},"action":"remove","lines":["#include <unistd.h>","#include <sys/socket.h>","#include <arpa/inet.h>","#include <netdb.h>","#include <sys/types.h>"],"id":3}],[{"start":{"row":1,"column":0},"end":{"row":27,"column":6},"action":"insert","lines":["#include <stdio.h>","#include <stdlib.h>","#include <string.h>","#include <iostream>","","#include <unistd.h>","#include <sys/socket.h>","#include <arpa/inet.h>","#include <netdb.h>","#include <sys/types.h>","","using namespace std;","","#define MAXBUF 1000000","","","struct sockaddr_in sockme, newsockme;","int s, childs;","char *hostnum;","int type;","int portnum;","","char bufout[1000];","char bufin[MAXBUF+1];","int result;","char c, *cp;","int n;"],"id":4}],[{"start":{"row":43,"column":0},"end":{"row":43,"column":3},"action":"insert","lines":["   "],"id":5}],[{"start":{"row":43,"column":3},"end":{"row":46,"column":33},"action":"insert","lines":["// Populate the data structure","sockme.sin_family = AF_INET;","sockme.sin_addr.s_addr = INADDR_ANY;","sockme.sin_port = htons(portnum);"],"id":6}],[{"start":{"row":43,"column":0},"end":{"row":43,"column":3},"action":"remove","lines":["   "],"id":7}],[{"start":{"row":51,"column":3},"end":{"row":57,"column":23},"action":"insert","lines":["s = socket(PF_INET, SOCK_STREAM, 0);","","result = bind(s, (struct sockaddr *) &sockme, sizeof(sockme));","","","// Queue up to 20 incoming requests","result = listen(s, 20);"],"id":8}],[{"start":{"row":51,"column":0},"end":{"row":51,"column":3},"action":"remove","lines":["   "],"id":9}],[{"start":{"row":69,"column":6},"end":{"row":70,"column":58},"action":"insert","lines":["socklen_t alen = sizeof(newsockme);","childs = accept(s, (struct sockaddr *) &newsockme, &alen);"],"id":10}],[{"start":{"row":70,"column":0},"end":{"row":70,"column":3},"action":"insert","lines":["   "],"id":11}],[{"start":{"row":70,"column":3},"end":{"row":70,"column":6},"action":"insert","lines":["   "],"id":12}],[{"start":{"row":87,"column":6},"end":{"row":89,"column":23},"action":"insert","lines":["// Just echo what was sent","result = send (childs, bufin, strlen(bufin), 0);","result = close(childs);"],"id":13}],[{"start":{"row":88,"column":0},"end":{"row":88,"column":3},"action":"insert","lines":["   "],"id":14}],[{"start":{"row":88,"column":3},"end":{"row":88,"column":6},"action":"insert","lines":["   "],"id":15}],[{"start":{"row":89,"column":0},"end":{"row":89,"column":3},"action":"insert","lines":["   "],"id":16}],[{"start":{"row":89,"column":3},"end":{"row":89,"column":6},"action":"insert","lines":["   "],"id":17}]]},"ace":{"folds":[],"scrolltop":1208.5,"scrollleft":0,"selection":{"start":{"row":86,"column":37},"end":{"row":86,"column":37},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":74,"state":"start","mode":"ace/mode/c_cpp"}},"timestamp":1543421803339,"hash":"b90a919fce27c689f6336edcd427006df1acd9cf"}